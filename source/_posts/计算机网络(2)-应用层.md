---
title: 计算机网络(2)-应用层
date: 2022-01-05 22:00:59
tags: 计算机网络
---

## 概述

- 网络应用的原理：网络应用协议的概念和实现方面

  - 传输层的服务模型
  - 客户-服务器模式
  - 对等模式(peer to peer)
  - 内容分发网络

- 网络应用的实例：互联网流行的应用层协议

  - HTTP
  - FTP
  - SMTP/POP3/IMAP
  - DNS

- 编程：网络应用程序

  - Socket API--传输层提供的服务

<!-- more -->  

## 协议原理

### 应用架构

- 客户-服务器(C/S)体系结构--达到一定量级后断崖式下降

  - 服务器

    - 一直运行
    - 固定的IP地址和周知的端口号
    - 扩展性：服务器场

      - 数据中心进行扩展
      - 扩展性差

  - 客户端

    - 主动与服务端通信
    - 与互联网有间歇性的连接
    - 可能是动态IP地址
    - 不直接与其他客户端通信
- 对等模式(P2P: Peer To Peer)

  - (几乎)没有一直运行的服务器
  - 任意端系统之间可以进行通信
  - 每一个节点即是客户端又是服务器

    - 自扩展性-新peer节点带来新的服务能力，当然也带来新的服务请求
  - 参与的主机间歇性连接且可以改变IP地址

    - 难以管理
- 混合模式:客户端-服务器和对等体系结构

  - Napster

    - 文件搜索：集中

      - 主机在中心服务器上注册其资源
      - 主机向中心服务器查询资源位置
    - 文件传输：P2P

      - 任意peer节点之间
  - 即时通信

    - 在线检测：集中

      - 当用户上线时，向中心服务器注册其IP地址
      - 用户与中心服务器联系，以找到其在线好友的位置
    - 两个用户之间聊天：P2P

### 进程通信
  
  进程：在主机上运行的应用程序

- 在同一主机内，使用进程间通信机制通信
- 不同主机，通过交换报文(Message)来通信

  - 使用OS提供的通信服务
  - 按照应用协议交换报文 -- 借助传输层提供的服务
- 具体实现

  - 客户端进程：发起通信的进程
  - 服务器进程：等待连接的进程
- 注意：P2P架构的应用也有客户端进程和服务器进程之分

#### 分布式通信进程

- 存在的问题

  1. 标示和寻址(服务用户)
  2. 传输层-应用层提供服务是如何的(服务)

      - 位置：层间界面的SAP [服务访问点] (TCP/IP：socket)
      - 形式：应用程序接口API(TCP/IP：socket API)
  3. 如何使用传输层提供的服务，实现应用进程之间的报文交换，实现应用(用户使用服务)
      - 定义应用层协议：报文格式，解释，时序等
      - 编制程序，使用OS提供的API，调用网络基础设施提供通信服务传报文，实现应用时序等。

- 解决方法

  1. 对进程进行编址-addressing

      本质上一对主机进程间的通信由2个端节点构成
      - 进程为了接收报文，必须有一个**标识**：**SAP**(发送也需要标示)

        - 主机：唯一的32位IP地址--仅仅有IP地址不能够唯一标示一个进程；在一条端系统上有很多应用进程在运行
        - 传输层协议：TCP或UDP
        - 端口号
      - 一个进程：用IP+port 标示 端节点

  2. 传输层提供的服务--需要穿过层间的信息

      - 层间接口必须要携带的信息

        - 要传输的报文(对于本层来说：SDU)

        [SDU]:# '服务数据单元，是从高层协议来的信息单元传送到低层协议。第N层服务数据单元SDU，和上一层的协议数据单元（PDU）是一一对应的。进入每个子层未被处理的数据称为服务数据单元(SDU)，经过子层处理后形成特定格式的数据被称为协议数据单元(PDU)。同时，本层形成的PDU即为下一层的SDU。根据协议数据单元的数据的不同，送到接收端的指定层。'

        - 谁传的：对方的应用进程的标示：IP+TCP(UDP)端口
        - 传给谁：对方的应用进程的标示：对方的IP+TCP(UDP)端口

      - 传输层实体(TCP或者UDP实体)根据这些信息进行TCP报文段(UDP数据报)的封装

        - 源端口号，目标端口号，数据等
        - 将IP地址往下交IP实体，用于封装IP数据报：源IP，目标IP

## Web and HTTP

## FTP

## Email

### SMTP

### POP3

### IMAP

## DNS

## P2P应用

## CDN

## TCP(Socket)编程

## UDP套接字编程
